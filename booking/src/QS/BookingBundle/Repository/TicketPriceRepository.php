<?php

namespace QS\BookingBundle\Repository;

use QS\BookingBundle\Entity\Ticket;
use QS\BookingBundle\Entity\Price;

/**
 * TicketPriceRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TicketPriceRepository extends \Doctrine\ORM\EntityRepository
{
    public function getOneByTicket(Ticket $ticket)
    {
        return $qb = $this->createQueryBuilder('tp')
            ->andWhere('tp.ticket = :ticket')
            ->setParameters([
                'ticket' => $ticket,
            ])
            ->setMaxResults(1)
            ->getQuery()
            ->getSingleResult()
        ;
    }

    public function getOneByTicketPrice(Ticket $ticket, Price $price)
    {
        return $qb = $this->createQueryBuilder('tp')
            ->andWhere('tp.ticket = :ticket')
            ->andWhere('tp.price = :price')
            ->setParameters([
                'ticket' => $ticket,
                'price' => $price,
            ])
            ->setMaxResults(1)
            ->getQuery()
            ->getSingleResult()
        ;
    }
}
